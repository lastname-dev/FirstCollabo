{"ast":null,"code":"import _asyncToGenerator from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{Button}from\"react-bootstrap\";import{useParams}from\"react-router\";import Navi from\"../components/Navi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostDetail(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),postDetail=_useState2[0],setPostDetail=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),postLikes=_useState4[0],setPostLikes=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var getPostDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/postdetail/\".concat(id));case 2:response=_context.sent.data;setPostDetail(response);setPostLikes(response.likes);setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getPostDetail(){return _ref.apply(this,arguments);};}();var handleLikes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"/postdetail/\".concat(id,\"/likes\"));case 2:response=_context2.sent.data;setPostLikes(response[0].likes);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLikes(){return _ref2.apply(this,arguments);};}();useEffect(function(){return getPostDetail();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navi,{}),loading?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading\"}):/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px\",width:\"calc(100% - 240px)\"},children:[/*#__PURE__*/_jsx(\"h5\",{style:{paddingBottom:\"15px\",borderBottomStyle:\"solid\",borderBottomWidth:\"3px\",width:\"100%\"},children:postDetail.kname}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{float:\"left\",paddingBottom:\"10px\",borderBottomStyle:\"solid\",borderBottomWidth:\"1.5px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"h5\",{style:{float:\"left\"},children:postDetail.title}),/*#__PURE__*/_jsx(\"h5\",{style:{float:\"right\"},children:postDetail.username})]}),/*#__PURE__*/_jsx(\"p\",{style:{paddingBottom:\"20px\",borderBottomStyle:\"solid\",borderBottomWidth:\"1.5px\",width:\"100%\",margin:\"20px\"},children:postDetail.content}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"30px\"}}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{onClick:handleLikes,variant:\"info\",children:\"\\uC88B\\uC544\\uC694 \".concat(postLikes)})})]})]});}export default PostDetail;","map":{"version":3,"sources":["/Users/parkchan/Desktop/coding/firstcollabo/react/src/routes/postDetail.js"],"names":["axios","useEffect","useState","Button","useParams","Navi","PostDetail","id","postDetail","setPostDetail","postLikes","setPostLikes","loading","setLoading","getPostDetail","get","response","data","likes","handleLikes","post","margin","width","paddingBottom","borderBottomStyle","borderBottomWidth","kname","float","title","username","content","height"],"mappings":"wZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,OAASC,SAAT,KAA0B,cAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,C,wFAEA,QAASC,CAAAA,UAAT,EAAsB,CACpB,eAAeF,SAAS,EAAxB,CAAQG,EAAR,YAAQA,EAAR,CACA,cAAoCL,QAAQ,CAAC,EAAD,CAA5C,wCAAOM,UAAP,eAAmBC,aAAnB,eACA,eAAkCP,QAAQ,CAAC,CAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAA8BT,QAAQ,CAAC,IAAD,CAAtC,yCAAOU,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,aAAa,0FAAG,sKACId,CAAAA,KAAK,CAACe,GAAN,uBAAyBR,EAAzB,EADJ,QACdS,QADc,eACoCC,IADpC,CAEpBR,aAAa,CAACO,QAAD,CAAb,CACAL,YAAY,CAACK,QAAQ,CAACE,KAAV,CAAZ,CACAL,UAAU,CAAC,KAAD,CAAV,CAJoB,sDAAH,kBAAbC,CAAAA,aAAa,0CAAnB,CAMA,GAAMK,CAAAA,WAAW,2FAAG,4KACMnB,CAAAA,KAAK,CAACoB,IAAN,uBAA0Bb,EAA1B,WADN,QACZS,QADY,gBAC6CC,IAD7C,CAElBN,YAAY,CAACK,QAAQ,CAAC,CAAD,CAAR,CAAYE,KAAb,CAAZ,CAFkB,wDAAH,kBAAXC,CAAAA,WAAW,2CAAjB,CAKAlB,SAAS,CAAC,iBAAMa,CAAAA,aAAa,EAAnB,EAAD,CAAwB,EAAxB,CAAT,CACA,mBACE,oCACE,KAAC,IAAD,IADF,CAEGF,OAAO,cACN,+BADM,cAGN,aACE,KAAK,CAAE,CACLS,MAAM,CAAE,MADH,CAELC,KAAK,CAAE,oBAFF,CADT,wBAME,WACE,KAAK,CAAE,CACLC,aAAa,CAAE,MADV,CAELC,iBAAiB,CAAE,OAFd,CAGLC,iBAAiB,CAAE,KAHd,CAILH,KAAK,CAAE,MAJF,CADT,UAQGd,UAAU,CAACkB,KARd,EANF,cAgBE,aAhBF,cAiBE,aACE,KAAK,CAAE,CACLC,KAAK,CAAE,MADF,CAELJ,aAAa,CAAE,MAFV,CAGLC,iBAAiB,CAAE,OAHd,CAILC,iBAAiB,CAAE,OAJd,CAKLH,KAAK,CAAE,MALF,CADT,wBASE,WACE,KAAK,CAAE,CACLK,KAAK,CAAE,MADF,CADT,UAKGnB,UAAU,CAACoB,KALd,EATF,cAgBE,WACE,KAAK,CAAE,CACLD,KAAK,CAAE,OADF,CADT,UAKGnB,UAAU,CAACqB,QALd,EAhBF,GAjBF,cA0CE,UACE,KAAK,CAAE,CACLN,aAAa,CAAE,MADV,CAELC,iBAAiB,CAAE,OAFd,CAGLC,iBAAiB,CAAE,OAHd,CAILH,KAAK,CAAE,MAJF,CAKLD,MAAM,CAAE,MALH,CADT,UASGb,UAAU,CAACsB,OATd,EA1CF,cAqDE,YAAK,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAV,CAAZ,EArDF,cAsDE,kCACE,KAAC,MAAD,EACE,OAAO,CAAEZ,WADX,CAEE,OAAO,CAAC,MAFV,uCAGST,SAHT,GADF,EAtDF,GALJ,GADF,CAsED,CAED,cAAeJ,CAAAA,UAAf","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useParams } from \"react-router\";\nimport Navi from \"../components/Navi\";\n\nfunction PostDetail() {\n  const { id } = useParams();\n  const [postDetail, setPostDetail] = useState({});\n  const [postLikes, setPostLikes] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const getPostDetail = async () => {\n    const response = (await axios.get(`/postdetail/${id}`)).data;\n    setPostDetail(response);\n    setPostLikes(response.likes);\n    setLoading(false);\n  };\n  const handleLikes = async () => {\n    const response = (await axios.post(`/postdetail/${id}/likes`)).data;\n    setPostLikes(response[0].likes);\n  };\n\n  useEffect(() => getPostDetail(), []);\n  return (\n    <div>\n      <Navi />\n      {loading ? (\n        <h2>Loading</h2>\n      ) : (\n        <div\n          style={{\n            margin: \"20px\",\n            width: \"calc(100% - 240px)\",\n          }}\n        >\n          <h5\n            style={{\n              paddingBottom: \"15px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"3px\",\n              width: \"100%\",\n            }}\n          >\n            {postDetail.kname}\n          </h5>\n          <br></br>\n          <div\n            style={{\n              float: \"left\",\n              paddingBottom: \"10px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"1.5px\",\n              width: \"100%\",\n            }}\n          >\n            <h5\n              style={{\n                float: \"left\",\n              }}\n            >\n              {postDetail.title}\n            </h5>\n            <h5\n              style={{\n                float: \"right\",\n              }}\n            >\n              {postDetail.username}\n            </h5>\n          </div>\n\n          <p\n            style={{\n              paddingBottom: \"20px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"1.5px\",\n              width: \"100%\",\n              margin: \"20px\",\n            }}\n          >\n            {postDetail.content}\n          </p>\n          <div style={{ height: \"30px\" }}></div>\n          <div>\n            <Button\n              onClick={handleLikes}\n              variant=\"info\"\n            >{`좋아요 ${postLikes}`}</Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PostDetail;\n"]},"metadata":{},"sourceType":"module"}