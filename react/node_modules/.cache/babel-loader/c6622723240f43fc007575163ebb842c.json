{"ast":null,"code":"import _asyncToGenerator from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/parkchan/Desktop/coding/firstcollabo/react/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{Button}from\"react-bootstrap\";import{useParams}from\"react-router\";import Navi from\"../components/Navi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostDetail(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),postDetail=_useState2[0],setPostDetail=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),postLikes=_useState4[0],setPostLikes=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),comments=_useState8[0],setComments=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),newComment=_useState10[0],setNewComment=_useState10[1];var username=sessionStorage.getItem(\"username\");var getPostDetail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var futurePosts,futureComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/postdetail/\".concat(id));case 2:futurePosts=_context.sent.data;_context.next=5;return axios.get(\"/comments/post/\".concat(id));case 5:futureComments=_context.sent.data;setPostDetail(futurePosts);setPostLikes(futurePosts.likes);setComments(futureComments);setLoading(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function getPostDetail(){return _ref.apply(this,arguments);};}();var handleLikes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"/postdetail/\".concat(id,\"/likes\"));case 2:response=_context2.sent.data;setPostLikes(response[0].likes);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLikes(){return _ref2.apply(this,arguments);};}();var changeNewComment=function changeNewComment(event){setNewComment(event.target.value);};var submitNewComment=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var futureComments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(\"/comments/post/\".concat(id),{username:username,content:newComment,localdate:new Date().toISOString().slice(0,19).replace(\"T\",\" \")});case 2:futureComments=_context3.sent.data;setNewComment(\"\");setComments(futureComments);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function submitNewComment(){return _ref3.apply(this,arguments);};}();useEffect(function(){return getPostDetail();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navi,{}),loading?/*#__PURE__*/_jsx(\"h2\",{children:\"Loading\"}):/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px\",width:\"calc(100% - 240px)\"},children:[/*#__PURE__*/_jsx(\"h5\",{style:{paddingBottom:\"15px\",borderBottomStyle:\"solid\",borderBottomWidth:\"3px\",width:\"100%\"},children:postDetail.kname}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{float:\"left\",paddingBottom:\"10px\",borderBottomStyle:\"solid\",borderBottomWidth:\"1.5px\",width:\"100%\",marginBottom:\"20px\"},children:[/*#__PURE__*/_jsx(\"h5\",{style:{float:\"left\"},children:postDetail.title}),/*#__PURE__*/_jsx(\"h5\",{style:{float:\"right\"},children:postDetail.username})]}),/*#__PURE__*/_jsx(\"p\",{style:{paddingBottom:\"20px\",borderBottomStyle:\"solid\",borderBottomWidth:\"1.5px\",width:\"100%\",marginBottom:\"20px\"},children:postDetail.content}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"30px\"}}),/*#__PURE__*/_jsx(Button,{onClick:handleLikes,variant:\"info\",children:\"\\uC88B\\uC544\\uC694 \".concat(postLikes)}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingBottom:\"15px\",borderBottomStyle:\"solid\",borderBottomWidth:\"2px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"h5\",{style:{paddingBottom:\"15px\",borderBottomStyle:\"solid\",borderBottomWidth:\"3px\",width:\"100%\"},children:\"\\uB313\\uAE00 \\uC218: \".concat(comments.length)}),comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"5px\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{width:\"10%\",float:\"left\"},children:comment.username}),/*#__PURE__*/_jsx(\"p\",{style:{width:\"90%\",float:\"right\"},children:comment.content})]});})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"20px 0px 20px 0px\"},children:[/*#__PURE__*/_jsx(\"textarea\",{style:{lineHeight:\"20px\",padding:\"0 5px\",resize:\"none\",width:\"calc(100% - 60px)\",float:\"left\",height:\"70px\"},value:newComment,onChange:changeNewComment,type:\"text\",class:\"form-control\",id:\"newComment\",maxLength:\"120\"}),/*#__PURE__*/_jsx(Button,{onClick:submitNewComment,style:{height:\"70px\",width:\"60px\",float:\"right\"},class:\"w-100 btn btn-lg btn-secondary\",children:\"\\uB313\\uAE00 \\uB4F1\\uB85D\"})]})]})]});}export default PostDetail;","map":{"version":3,"sources":["/Users/parkchan/Desktop/coding/firstcollabo/react/src/routes/postDetail.js"],"names":["axios","useEffect","useState","Button","useParams","Navi","PostDetail","id","postDetail","setPostDetail","postLikes","setPostLikes","loading","setLoading","comments","setComments","newComment","setNewComment","username","sessionStorage","getItem","getPostDetail","get","futurePosts","data","futureComments","likes","handleLikes","post","response","changeNewComment","event","target","value","submitNewComment","content","localdate","Date","toISOString","slice","replace","margin","width","paddingBottom","borderBottomStyle","borderBottomWidth","kname","float","marginBottom","title","height","length","map","comment","lineHeight","padding","resize"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useParams } from \"react-router\";\nimport Navi from \"../components/Navi\";\n\nfunction PostDetail() {\n  const { id } = useParams();\n  const [postDetail, setPostDetail] = useState({});\n  const [postLikes, setPostLikes] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [comments, setComments] = useState([]);\n  const [newComment, setNewComment] = useState(\"\");\n  const username = sessionStorage.getItem(\"username\");\n  const getPostDetail = async () => {\n    const futurePosts = (await axios.get(`/postdetail/${id}`)).data;\n    const futureComments = (await axios.get(`/comments/post/${id}`)).data;\n    setPostDetail(futurePosts);\n    setPostLikes(futurePosts.likes);\n    setComments(futureComments);\n    setLoading(false);\n  };\n  const handleLikes = async () => {\n    const response = (await axios.post(`/postdetail/${id}/likes`)).data;\n    setPostLikes(response[0].likes);\n  };\n  const changeNewComment = (event) => {\n    setNewComment(event.target.value);\n  };\n  const submitNewComment = async () => {\n    const futureComments = (\n      await axios.post(`/comments/post/${id}`, {\n        username: username,\n        content: newComment,\n        localdate: new Date().toISOString().slice(0, 19).replace(\"T\", \" \"),\n      })\n    ).data;\n    setNewComment(\"\");\n    setComments(futureComments);\n  };\n  useEffect(() => getPostDetail(), []);\n  return (\n    <div>\n      <Navi />\n      {loading ? (\n        <h2>Loading</h2>\n      ) : (\n        <div\n          style={{\n            margin: \"20px\",\n            width: \"calc(100% - 240px)\",\n          }}\n        >\n          <h5\n            style={{\n              paddingBottom: \"15px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"3px\",\n              width: \"100%\",\n            }}\n          >\n            {postDetail.kname}\n          </h5>\n          <br></br>\n          <div\n            style={{\n              float: \"left\",\n              paddingBottom: \"10px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"1.5px\",\n              width: \"100%\",\n              marginBottom: \"20px\",\n            }}\n          >\n            <h5\n              style={{\n                float: \"left\",\n              }}\n            >\n              {postDetail.title}\n            </h5>\n            <h5\n              style={{\n                float: \"right\",\n              }}\n            >\n              {postDetail.username}\n            </h5>\n          </div>\n\n          <p\n            style={{\n              paddingBottom: \"20px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"1.5px\",\n              width: \"100%\",\n              marginBottom: \"20px\",\n            }}\n          >\n            {postDetail.content}\n          </p>\n          <div style={{ height: \"30px\" }}></div>\n          <Button\n            onClick={handleLikes}\n            variant=\"info\"\n          >{`좋아요 ${postLikes}`}</Button>\n          <div\n            style={{\n              paddingBottom: \"15px\",\n              borderBottomStyle: \"solid\",\n              borderBottomWidth: \"2px\",\n              width: \"100%\",\n            }}\n          >\n            <h5\n              style={{\n                paddingBottom: \"15px\",\n                borderBottomStyle: \"solid\",\n                borderBottomWidth: \"3px\",\n                width: \"100%\",\n              }}\n            >\n              {`댓글 수: ${comments.length}`}\n            </h5>\n            {comments.map((comment) => (\n              <div\n                style={{\n                  margin: \"5px\",\n                }}\n              >\n                <p style={{ width: \"10%\", float: \"left\" }}>\n                  {comment.username}\n                </p>\n                <p style={{ width: \"90%\", float: \"right\" }}>\n                  {comment.content}\n                </p>\n              </div>\n            ))}\n          </div>\n          <div style={{ margin: \"20px 0px 20px 0px\" }}>\n            <textarea\n              style={{\n                lineHeight: \"20px\",\n                padding: \"0 5px\",\n                resize: \"none\",\n                width: \"calc(100% - 60px)\",\n                float: \"left\",\n                height: \"70px\",\n              }}\n              value={newComment}\n              onChange={changeNewComment}\n              type=\"text\"\n              class=\"form-control\"\n              id=\"newComment\"\n              maxLength=\"120\"\n            ></textarea>\n            <Button\n              onClick={submitNewComment}\n              style={{ height: \"70px\", width: \"60px\", float: \"right\" }}\n              class=\"w-100 btn btn-lg btn-secondary\"\n            >\n              댓글 등록\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PostDetail;\n"]},"metadata":{},"sourceType":"module"}